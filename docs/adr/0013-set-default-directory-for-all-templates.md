# 0013. Set default directory for all templates

Date: 2025-12-04

## Status

Accepted

## Context

Users need a way to configure where different document types are stored, but requiring explicit configuration for every document type creates unnecessary complexity. The system needs sensible defaults while allowing customization when needed.

## Decision

We implement a merge-based configuration system where `.diataxis` overrides are merged into `DEFAULT_CONFIG`:

The default configuration in `lib/diataxis/config.rb`:

```ruby
DEFAULT_CONFIG = {
  'default' => 'docs',
  'readme' => 'README.md',
  'adr' => 'docs/adr'
}.freeze
```

Implementation details:

- `Config.load()` merges `.diataxis` user overrides into `DEFAULT_CONFIG`
- `Config.path_for(type_key)` does simple lookup: `config[type_key] || config['default']`
- All document type classes call: `Config.path_for('type_key')`
- Precedence: `.diataxis[type_key]` > `.diataxis['default']` > `DEFAULT_CONFIG[type_key]` > `DEFAULT_CONFIG['default']`
- Document types that don't need special paths don't need to be in `DEFAULT_CONFIG` - they fall back to `'default'`

## Consequences

**Positive:**

- **Minimal DEFAULT_CONFIG**: Only define types that need non-default paths (readme, adr)
- **Simple overrides**: Users edit `.diataxis` to override any path or change the default
- **Merge behavior**: User config merges into defaults, not replaces
- **Easy to extend**: New document types just call `Config.path_for('type')` - no config needed unless they need a special path
- **Clear precedence**: `.diataxis` overrides merged into `DEFAULT_CONFIG`

**Negative:**

- **Config merge logic**: Slightly more complex than pure replacement

**Examples:**

Minimal `.diataxis` (generated by `dia init .`):

```json
{
  "default": "docs",
  "readme": "README.md",
  "adr": "docs/adr"
}
```

Override default directory for all types:

```json
{
  "default": "documentation"
}
```

Override specific types:

```json
{
  "default": "docs",
  "adr": "decisions",
  "howtos": "guides"
}
```

## References

When adding references:

- **Code**: Link to GitHub with line numbers: [`filename:line`](https://github.com/org/repo/blob/main/path/file.rb#L123)
- **Docs**: Link to official documentation: [Documentation Title](https://example.com/docs)
- **Related ADRs**: Link to other ADRs: [ADR-0001](./0001-title.md)
